<launch>
	<!-- Nó camera_handler.py -->
	<arg name="ost_file" default="$(find droneifsc)/scripts/ost.yaml"/>
	
    <node pkg="droneifsc" type="camera_clientROS.py" name="camera_clientROS" output="screen"> 
		<param name="image_topic" value="/camera/image_raw"/>
		<param name="camera_info_topic" value="/camera/camera_info"/>
		<param name="frame_id" value="camera_frame"/>
		<param name="ost_file" value="$(arg ost_file)"/>  <!-- Path to the camera calibration file -->
	</node>
    
	<!-- Nó ArUco Tracker -->
    <node pkg="nodelet" type="nodelet" name="aruco_tracker" args="standalone aruco_opencv/ArucoTracker" output="screen">
        <param name="cam_base_topic" value="camera/image_raw" />
        <param name="image_is_rectified" value="false" />
        <param name="marker_size" value="0.18" />
    </node>

    <!-- Nó pose_MAV_sender.py -->
	<arg name="connection_string" default="udp://127.0.0.1:14551@"/><!-- udp:127.0.0.1:14550 for gazebo -->
    
    <node pkg="droneifsc" type="pose_MAV_sender.py" name="pose_mav_sender" output="screen">
		<param name="connection_string" value="$(arg connection_string)"/>

    <!-- nó MAVROS -->
    <arg name="fcu_url" default="udp://127.0.0.1:14550@"/> <!-- porta padrão de output do ardupilot -->
	<arg name="gcs_url" default=""/>
	<arg name="tgt_system" default="1" />
	<arg name="tgt_component" default="1" />
	<arg name="log_output" default="screen" />
	<arg name="respawn_mavros" default="true"/>
	<arg name="mavros_ns" default="/"/>
	<arg name="config_yaml" default="$(find mavros)/launch/apm_config.yaml" />
	
	<include file="$(find droneifsc)/launch/mavros_node.launch">
		<arg name="pluginlists_yaml" value="$(find mavros)/launch/apm_pluginlists.yaml" />
		<arg name="config_yaml" value="$(arg config_yaml)" />
		<arg name="mavros_ns" value="$(arg mavros_ns)"/>
		<arg name="fcu_url" value="$(arg fcu_url)" />
		<arg name="gcs_url" value="$(arg gcs_url)" />
		<arg name="respawn_mavros" value="$(arg respawn_mavros)"/>
		<arg name="tgt_system" value="$(arg tgt_system)" />
		<arg name="tgt_component" value="$(arg tgt_component)" />
		<arg name="log_output" value="$(arg log_output)" />
	</include>
	<!--AMÉM-->
	<param name="/mavros/landing_target/mav_frame" value="BODY_FRD"/>
	<!--<param name="/mavros/landing_target/listen_lt" value="True"/>-->



</launch>